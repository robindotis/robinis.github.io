
<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="UTF-8">
        <!-- See: https://www.w3schools.com/css/css_rwd_viewport.asp-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>European Baccalaureate Subject Choices</title>
    
        <script>
            function updateValue(e) {
                if(e.target.type == "radio") {
                    // add _X to end of name to get field for lesson count
                    const id = e.target.name + "_X";
                    const field = document.getElementById(id);
                    field.value = e.target.value;
                }
                else if (e.target.type == "checkbox") {
                    const id = e.target.id + "_X";
                    const field = document.getElementById(id);
                    if(e.target.checked) {
                        field.value = e.target.value;
                    }
                    else {
                        field.value = 0;
                    }
                }

                //Uncheck GEO2, HIS2 and PHI2 if 4 period is chosen
                if(e.target.id == "HIS4" || e.target.id == "GEO4" || e.target.id == "PHI4") {
                    const subj2 = e.target.id.replace("4","2");
                    document.getElementById(subj2).checked = !e.target.checked;
                    document.getElementById(subj2 + "_X").value = Number(document.getElementById(subj2).checked) * Number(document.getElementById(subj2).value);
                }
                
                //Enable Advanced Maths only if MAT5 chosen
                if(e.target.name == "MAT") {
                    const field = document.getElementById("AMA");
                    if(e.target.value == 5) {
                        field.disabled = false;
                    }
                    else {
                        field.disabled = true;
                        if(field.checked){
                            document.getElementById("ADV_X").value = 0;
                            field.checked = false;
                        }
                    }
                }

                //Enable LABs depending on the 4P science chosen
                if(e.target.id == "BIO4" || e.target.id == "CHE" || e.target.id == "PHY") {
                    const field = document.getElementById("LAB" + e.target.id);
                    if(e.target.checked) {
                        field.disabled = false;
                    }
                    else {
                        field.disabled = true;
                        if(field.checked){
                            document.getElementById("LAB_X").value = 0;
                            field.checked = false;
                            document.getElementById("NOLAB").checked = true;
                        }
                    }
                
                    //if BIO4 checked, uncheck and disable BIO2
                    if(document.getElementById("BIO4").checked) {
                        document.getElementById("BIO2").checked = false;
                        document.getElementById("BIO2").disabled = true;
                        document.getElementById("BIO2_X").value = 0;
                    }
                    else if(!document.getElementById("CHE").checked && !document.getElementById("PHY").checked) {
                            //Enable if neither CHE or PHY are checked and BIO4 not checked
                            //Check BIO2 and disable it
                            document.getElementById("BIO2").checked = true;
                            document.getElementById("BIO2").disabled = true;
                            document.getElementById("BIO2_X").value = 2;
                    } 
                    else if(document.getElementById("CHE").checked || document.getElementById("PHY").checked) {
                            //Enable BIO2 if either CHE and PHY are checked and BIO4 not checked
                            document.getElementById("BIO2").disabled = false;
                    }
                }

                //Disable Intro to Eco if Economics p4 chosen
                if(e.target.name == "ECL") {
                    const field = document.getElementById("ECI");
                    if(e.target.id == "ECO") {
                        field.disabled = true;
                        if(field.checked){
                            document.getElementById("ECI_X").value = 0;
                            field.checked = false;
                        }
                    }
                    else {
                        field.disabled = false;
                    }
                }

                //Disable Art p2 if taken as p4
                if(e.target.id == "ART") {
                    const field = document.getElementById("ARC");
                    if(e.target.checked) {
                        field.disabled = true;
                        if(field.checked){
                            document.getElementById("ARC_X").value = 0;
                            field.checked = false;
                        }
                    }
                    else {
                        field.disabled = false;
                    }
                }

                //Disable Music p2 if taken as p4
                if(e.target.id == "MUS") {
                    const field = document.getElementById("MSC");
                    if(e.target.checked) {
                        field.disabled = true;
                        if(field.checked){
                            document.getElementById("MSC_X").value = 0;
                            field.checked = false;
                        }
                    }
                    else {
                        field.disabled = false;
                    }
                }

                updateTotals();
            }

            function setMaths(p){
                const field  = document.getElementById("MAT" + p);
                field.checked = true;
                document.getElementById("MAT_X").value = field.value;
                //disable advance maths if MAT3
                const ama = document.getElementById("AMA");
                if(p == 5){
                    ama.disabled = false;
                }
                else {
                    ama.disabled = true;
                    if(ama.checked) {
                        document.getElementById("ADV_X").value = 0;
                        ama.checked = false;
                    }
                }
                updateTotals();
            }

            function setMaxSciences(){
                document.getElementById("choices").reset();

                document.getElementById("BIO4").checked = true;
                document.getElementById("BIO4_X").value = document.getElementById("BIO4").value;
                document.getElementById("CHE").checked = true;
                document.getElementById("CHE_X").value = document.getElementById("CHE").value;
                document.getElementById("PHY").checked = true;
                document.getElementById("PHY_X").value = document.getElementById("PHY").value;
                document.getElementById("BIO2").checked = false;
                document.getElementById("BIO2").enabled = true;
                document.getElementById("BIO2_X").value = 0;
                document.getElementById("MAT5").checked = true;
                document.getElementById("MAT_X").value = document.getElementById("MAT5").value;
                document.getElementById("AMA").checked = true;
                document.getElementById("AMA").disabled = false;
                document.getElementById("ADV_X").value = document.getElementById("AMA").value;

                updateTotals();
            }

            function setMaxMathsSciences(){
                document.getElementById("choices").reset();
                setAllSciences();
                setAdvanced("AMA")
                updateTotals();
            }

            function setAdvanced(subj){
                if(subj == "AMA") {
                    const mat5  = document.getElementById("MAT5");
                    mat5.checked = true;
                    document.getElementById("MAT_X").value = mat5.value;     
                }
                const field  = document.getElementById(subj);
                field.checked = true;
                field.disabled = false;
                document.getElementById("ADV_X").value = field.value;
                updateTotals();
            }

            function setMinSubjects(){
                document.getElementById("choices").reset();

                document.getElementById("MAT5").checked = true;
                document.getElementById("MAT_X").value = document.getElementById("MAT5").value;
                document.getElementById("HIS4").checked = true;
                document.getElementById("HIS4_X").value = document.getElementById("HIS4").value;
                document.getElementById("GEO4").checked = true;
                document.getElementById("GEO4_X").value = document.getElementById("GEO4").value;
                document.getElementById("PHI4").checked = true;
                document.getElementById("PHI4_X").value = document.getElementById("PHI4").value;
                document.getElementById("BIO4").checked = true;
                document.getElementById("BIO4_X").value = document.getElementById("BIO4").value;
                document.getElementById("HIS2").checked = false;
                document.getElementById("HIS2_X").value = 0;
                document.getElementById("GEO2").checked = false;
                document.getElementById("GEO2_X").value = 0;
                document.getElementById("PHI2").checked = false;
                document.getElementById("PHI2_X").value = 0;
                document.getElementById("BIO2").checked = false;
                document.getElementById("BIO2_X").value = 0;

                updateTotals();
            }

            function setOptions(subj){
                if(subj == "BIO2") {
                    //remove Chemistry 4p
                    const che  = document.getElementById("CHE");
                    che.checked = false;
                    document.getElementById("CHE_X").value = 0;
                    
                    //remove Physics 4p
                    const phy  = document.getElementById("PHY");
                    phy.checked = false;
                    document.getElementById("PHY_X").value = 0;

                    //Set BIO 2p
                    const bio = document.getElementById(subj);
                    bio.checked = true;
                    document.getElementById("BIO2_X").value = bio.value;

                    //disable Labs
                    const labBio  = document.getElementById("LABBIO");
                    labBio.checked = false;
                    labBio.disabled = true;
                    const labChe  = document.getElementById("LABCHE");
                    labChe.checked = false;
                    labChe.disabled = true;
                    const labPhy  = document.getElementById("LABPHY");
                    labPhy.checked = false;
                    labPhy.disabled = true;
                    const noLab  = document.getElementById("NOLAB");
                    noLab.checked = true;
                    document.getElementById("LAB_X").value = noLab.value;
                }
                else {
                    const field  = document.getElementById(subj);
                    field.checked = true;
                    document.getElementById(subj + "_X").value = field.value;
                    const subj2 = subj.replace("4","2");
                    document.getElementById(subj2).checked = false;
                    document.getElementById(subj2 + "_X").value = 0;
                }
                updateTotals();
            }

            function updateTotals(){
                //calculate new totals
                document.getElementById("COMPULSORY_X").value = 
                    +document.getElementById("L1_X").value + 
                    +document.getElementById("L2_X").value + 
                    +document.getElementById("ETH_X").value + 
                    +document.getElementById("PE_X").value +
                    +document.getElementById("MAT_X").value +
                    +document.getElementById("BIO2_X").value +
                    +document.getElementById("HIS2_X").value +
                    +document.getElementById("GEO2_X").value +
                    +document.getElementById("PHI2_X").value;

                document.getElementById("OPTIONAL_X").value = 
                    +document.getElementById("CHE_X").value + 
                    +document.getElementById("PHY_X").value + 
                    +document.getElementById("BIO4_X").value + 
                    +document.getElementById("HIS4_X").value + 
                    +document.getElementById("GEO4_X").value + 
                    +document.getElementById("PHI4_X").value + 
                    +document.getElementById("ADV_X").value +
                    +document.getElementById("ART_X").value +
                    +document.getElementById("MUS_X").value +
                    +document.getElementById("L3_X").value +
                    +document.getElementById("L4_X").value +
                    +document.getElementById("ECL_X").value;

                document.getElementById("COMPLEMENTARY_X").value = 
                    +document.getElementById("ARC_X").value + 
                    +document.getElementById("CLS_X").value + 
                    +document.getElementById("DRA_X").value + 
                    +document.getElementById("SUS_X").value +
                    +document.getElementById("ICT_X").value +
                    +document.getElementById("ECI_X").value +
                    +document.getElementById("MSC_X").value +
                    +document.getElementById("PSC_X").value +
                    +document.getElementById("SOC_X").value +
                    +document.getElementById("SPO_X").value +
                    +document.getElementById("TDR_X").value +
                    +document.getElementById("L5_X").value +
                    +document.getElementById("LAB_X").value;

                document.getElementById("TOTAL_X").value = 
                    +document.getElementById("COMPULSORY_X").value +
                    +document.getElementById("OPTIONAL_X").value +
                    +document.getElementById("COMPLEMENTARY_X").value;
            }
        
        </script>
        <style>
            body {
                margin:0;
                font-family: Arial, Helvetica, sans-serif;
            }
            header, footer {
                background-color: #004494;
                color: #fff;
            }
            h1, footer p {
                display: block;
                width:100%;
                padding:0.5em;
                margin: 0;
                font-size: 2em;
            }
            main {
                padding:1em;
            }
            main h2 {
                margin:0;
            }
            main button {
                padding:0.3em;
                margin:0 0.8em 0 0;
            }

            footer p {
                font-size: 1.1em;
            }

            form {
/*                display:flex;
                flex-flow: row wrap;*/
            } 
            
            form > fieldset {
                min-width: 25%;
            }

            fieldset {
                line-height: 1.5em;
            }

            fieldset fieldset {
                border: 0;
                padding: 0;
                margin: 0.5em 0 0.5em 0;
            }

            input[type=text] {
                border:0;
                width: 1em;
                float:right;
            }

            input[type=radio] {
                background-color: #0f0;
            }

            label.total {
                float: right;
            }

            input {
                margin: 0;
                vertical-align:baseline;
            }

            label {
                margin: 0 0.8em 0 0.2em;
            }
            
        </style>
    </head>
    <body>
        <header>
            <h1>Subject selector for European Baccalaureate</h1>
        </header>
        <main>
            <h2>Introduction</h2>
            <p>
                This page will help you make <a href="http://www.euroschool.lu/site/secondary-s6-s7-subject-choice-booklet/">your subject choices</a> for the European Baccalaureate.For the complete rules, see that page.
            </p>
        
        <h2>Quick picks</h2>
        <p>These buttons help you pre-configure the subject grid</p>
        <p>
            <button onclick="setMaxSciences();">Maximise Sciences</button> 
            <button onclick="setMinSubjects();">Minimise Subjects</button>
        </p>
            <!--
            <div>
                <h3>Compulsory Maths</h3>
                <p>
                    <button onclick="setMaxMathsSciences();">Sciences and advanced Maths</button> or<br>
                    <button onclick="setMaths(3);">3 period maths</button> or<br>
                    <button onclick="setMaths(5);">5 period maths</button> or<br>
                    <button onclick="setAdvanced('AMA');">Advanced Maths</button>
                </p>
            </div>
            <div>
                <h3>Compulsory 2 or 4 period subjects</h3>
                <p>
                    <button onclick="setOptions('HIS4');">History 4 periods</button>
                    <button onclick="setOptions('GEO4');">Georgraphy 4 periods</button><br>
                    <button onclick="setOptions('PHI4');">Philosophy 4 periods</button>
                    <button onclick="setOptions('BIO2');">No science (Biology 2 periods)</button>
                </p>
            </div>
            <div>
                <h3>Advanced subjects</h3>
                <p>
                    <button onclick="setAdvanced('AMA');">Advanced Maths</button> or<br>
                    <button  onclick="setAdvanced('AL1');">Advanced L1</button> or<br>
                    <button onclick="setAdvanced('AL2');">Advanced L2</button>
                </p>
            </div>
-->
        <h2>Subject Grid</h2>
        <form id="choices" >
            <fieldset class="col1">
                <legend>Compulsory subjects</legend>
                <input type="checkbox" checked disabled id="L1" value="4"><label for="L1">Language 1</label><input type="text" value="4" readonly disabled size="1" id="L1_X"><br>
                <input type="checkbox" checked disabled id="L2" value="3"><label for="L2">Language 2</label><input type="text" value="3" readonly disabled size="1" id="L2_X"><br>
                <input type="radio" checked id="MAT3" value="3" name="MAT"><label for="MAT3">Maths 3</label>
                <input type="radio" id="MAT5" value="5" name="MAT"><label for="MAT5">Maths 5</label><input type="text" value="3" readonly disabled size="1" id="MAT_X"><br>
                <input type="checkbox" checked disabled id="BIO2" value="2"><label for="BIO2">Biology 2</label><input type="text" value="2" readonly disabled size="1" id="BIO2_X"><br>
                <input type="checkbox" checked disabled id="HIS2" value="2"><label for="HIS2">History 2</label><input type="text" value="2" readonly disabled size="1" id="HIS2_X"><br>
                <input type="checkbox" checked disabled id="GEO2" value="2"><label for="GEO2">Geography 2</label><input type="text" value="2" readonly disabled size="1" id="GEO2_X"><br>
                <input type="checkbox" checked disabled id="PHI2" value="2"><label for="PHI2">Philosophy 2</label><input type="text" value="2" readonly disabled size="1" id="PHI2_X"><br>
                <input type="checkbox" checked disabled id="PE" value="2"><label for="PE">Physical Education</label><input type="text" value="2" readonly disabled size="1" id="PE_X"><br>
                <input type="checkbox" checked disabled id="ETH" value="1"><label for="ETH">Ethics/Religion</label><input type="text" value="1" readonly disabled size="1" id="ETH_X"><br>
                <label class="total">Total Compulsory: <input type="text" readonly disabled value="21" id="COMPULSORY_X"></label>
            </fieldset>
            <fieldset class="col2">
                <legend>Optional subjects</legend>
                <input type="checkbox" id="HIS4" value="4"><label for="HIS4">History 4</label>
                <input type="text" value="0" readonly disabled size="1" id="HIS4_X" aria-hidden="true"><br>
                <input type="checkbox" id="GEO4" value="4"><label for="GEO4">Geography 4</label>
                <input type="text" value="0" readonly disabled size="1" id="GEO4_X" aria-hidden="true"><br>
                <input type="checkbox" id="PHI4" value="4"><label for="PHI4">Philosophy 4</label>
                <input type="text" value="0" readonly disabled size="1" id="PHI4_X" aria-hidden="true"><br>

                <input type="checkbox" id="BIO4" value="4"><label for="BIO4">Biology 4</label>
                <input type="text" value="0" readonly disabled size="1" id="BIO4_X" aria-hidden="true"><br>
                <input type="checkbox" id="CHE" value="4"><label for="CHE">Chemistry 4</label>
                <input type="text" value="0" readonly disabled size="1" id="CHE_X" aria-hidden="true"><br>
                <input type="checkbox" id="PHY" value="4"><label for="PHY">Physics 4</label>
                <input type="text" value="0" readonly disabled size="1" id="PHY_X" aria-hidden="true"><br>                            
                <br>
                <input type="checkbox" id="ART" value="4"><label for="ART">Art</label>
                <input type="text" value="0" readonly disabled size="1" id="ART_X"><br>
                <input type="checkbox" id="MUS" value="4"><label for="MUS">Music</label>
                <input type="text" value="0" readonly disabled size="1" id="MUS_X"><br>
                <input type="checkbox" id="L3" value="4"><label for="L3">Language 3</label>
                <input type="text" value="0" readonly disabled size="1" id="L3_X"><br>
                <input type="checkbox" id="L4" value="4"><label for="L4">Language 4 or ONL</label>
                <input type="text" value="0" readonly disabled size="1" id="L4_X">
                <hr>
                <input type="radio" id="ECO" name="ECL" value="4"><label for="ECO">Economics</label>
                <input type="radio" id="LAT" name="ECL" value="4"><label for="LAT">Latin</label>
                <input type="radio" id="NEL" name="ECL" value="0" checked><label for="NEL">Neither</label>
                <input type="text" value="0" readonly disabled size="1" id="ECL_X">        

                <fieldset>
                    <legend>Advanced subjects</legend>
                        <input type="radio" checked  id="NAD" name="ADV" value="0"><label for="NAD">None</label>
                        <input type="radio" id="AL1" name="ADV" value="3"><label for="AL1">L1</label>
                        <input type="radio" id="AL2" name="ADV" value="3"><label for="AL2">L2</label>
                        <input type="radio" id="AMA" name="ADV" disabled value="3"><label for="AMA">Maths</label>
                        <input type="text" value="0" readonly disabled size="1" id="ADV_X">
                </fieldset>
                <label class="total">Total Optional: <input type="text" readonly disabled id="OPTIONAL_X"></label>
            </fieldset>
            <fieldset class="col3">
                <legend>Complementary subjects</legend>
                    <input type="checkbox" id="ARC" value="2"><label for="ARC">Art</label>
                    <input type="text" value="0" readonly disabled size="1" id="ARC_X"><br>                    
                    <input type="checkbox" id="CLS" value="2"><label for="CLS">Classical Studies</label>
                    <input type="text" value="0" readonly disabled size="1" id="CLS_X"><br>
                    <input type="checkbox" id="DRA" value="2"><label for="DRA">Drama</label>
                    <input type="text" value="0" readonly disabled size="1" id="DRA_X"><br>
                    <input type="checkbox" id="SUS" value="2"><label for="SUS">Education for Sustainable Development</label>
                    <input type="text" value="0" readonly disabled size="1" id="SUS_X"><br>
                    <input type="checkbox" id="ICT" value="2"><label for="ICT">ICT</label>
                    <input type="text" value="0" readonly disabled size="1" id="ICT_X"><br>
                    <input type="checkbox" id="ECI" value="2"><label for="ECI">Introduction to Economics</label> 
                    <input type="text" value="0" readonly disabled size="1" id="ECI_X"><br>
                    <input type="checkbox" id="MSC" value="2"><label for="MSC">Music</label>
                    <input type="text" value="0" readonly disabled size="1" id="MSC_X"><br>
                    <input type="checkbox" id="PSC" value="2"><label for="PSC">Political Science</label>
                    <input type="text" value="0" readonly disabled size="1" id="PSC_X"><br>
                    <input type="checkbox" id="SOC" value="2"><label for="SOC">Sociology</label>
                    <input type="text" value="0" readonly disabled size="1" id="SOC_X"><br>
                    <input type="checkbox" id="SPO" value="2"><label for="SPO">Sport</label>
                    <input type="text" value="0" readonly disabled size="1" id="SPO_X"><br>                 
                    <input type="checkbox" id="TDR" value="2"><label for="TDR">Technical Drawing</label>
                    <input type="text" value="0" readonly disabled size="1" id="TDR_X"><br>
                    <fieldset>
                        <legend>Laboratories</legend>
                        <input type="radio" id="NOLAB" name="LAB" value="0" checked><label for="NOLAB">None</label>
                        <input type="radio" id="LABBIO4" name="LAB" value="2" disabled><label for="LABBIO4">Biology</label>
                        <input type="radio" id="LABCHE" name="LAB" value="2" disabled><label for="LABCHE">Chemistry</label> 
                        <input type="radio" id="LABPHY" name="LAB" value="2" disabled><label for="LABPHY">Physics</label>
                        <input type="text" value="0" readonly disabled size="1"  id="LAB_X">
                    </fieldset>
                    <fieldset>
                        <legend>Language 5</legend>
                        <input type="radio" id="NOL5" name="L5" value="0" checked><label for="NOL5">None</label>
                        <input type="radio" id="L5C" name="L5" value="2"><label for="L5C">Chinese</label>
                        <input type="radio" id="L5D" name="L5" value="2"><label for="L5D">Dutch</label>
                        <input type="radio" id="L5S" name="L5" value="2"><label for="L5S">Spanish</label><br>
                        <input type="radio" id="L5L" name="L5" value="2"><label for="L5L">Luxembourgish</label>
                        <input type="radio" id="L5G" name="L5" value="2"><label for="L5G">Modern Greek</label>
                        <input type="text" value="0" readonly disabled size="1"  id="L5_X">
                    </fieldset>
                    <label class="total">Total Complementary: <input type="text" readonly disabled id="COMPLEMENTARY_X"></label>
            </fieldset>
            <label class="total">Total periods: <input type="text" readonly disabled id="TOTAL_X"></label>
        </form>
    </main>
    <footer>
        <p>
            Offered without any warranty or guarantee about the accuracy. If in doubt, keep calm and carry on!
        </p>
    </footer>
    <script>
            const form = document.getElementById('choices');
            form.addEventListener('change', updateValue);
        </script>
    </body>
</html>
