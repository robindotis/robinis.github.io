<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8">
    <!-- See: https://www.w3schools.com/css/css_rwd_viewport.asp-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett">
    <title>Robin . is:  Improving the pipeline</title>
    <meta name="description" content="writing, travelling, seeing, coding and walking the üêï‚Äçü¶∫">
    <meta name="keywords" content="posts,web,development,github,publication,actions,workflows" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <meta property="a11y:statement" content="/pages/accessibility/">
    <meta property="a11y:feedback" content="/accessibility/feedback">
    <meta property="a11y:complaints" content="/accessibility/feedback">

    <meta property="og:locale" content="en_GB">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Robin . is... Improving the pipeline">
    <meta property="og:description" content="writing, travelling, seeing, coding and walking the üêï‚Äçü¶∫">
    <meta property="og:url" content="https://www.robin.is/posts/2023/publication-pipeline/">
    <meta property="og:site_name" content="Robin . is">
    <meta property="og:image" content="">
    <link rel="canonical" href="https://www.robin.is/posts/2023/publication-pipeline/">
    <link rel="me" href="https://github.com/robindotis/">
    <link rel="icon" href="/assets/images/cw.jpg" type="image/jpeg" sizes="50x50">
    <link rel="preload" href="/assets/fonts/Mona-Sans.woff2" as="font" type="font/woff2" crossorigin>
    
    <link rel="stylesheet" href="/assets/css/fonts.css" media="all">
    <link rel="stylesheet" href="/assets/css/structure.css" media="all">
    <link rel="stylesheet" href="/assets/css/style.css" media="all">
    <link rel="stylesheet" href="/assets/css/default.css" media="all">
    <link rel="alternate" type="application/rss+xml" title="Robin . is RSS" href="/feed/">
    <link rel="alternate" href="/feed/index.xml" type="application/atom+xml" title="Robin . is">
    <link rel="alternate" href="." type="application/json" title="Robin . is">
    <script src="/assets/js/theme.js" defer></script>
  </head>
  <body>
    <p class="skip-link"><a href="#skip-content-target">Skip to the content</a></p>
    <header class="masthead">
        <div class="header-area">
            <p id="themeSwitch">                
            </p>
            <hr class="nodisplay" aria-hidden="true">
            <div class="header-title">
            <span class="sitetitle">
                <img class="logo" src="/assets/images/cw.jpg" alt="">
                <a href="/" class="u-url">Robin . is</a>
            </span>
            <nav class="subtitle" aria-label="Main">
                <a href="/writing/" >writing</a>, 
                <a href="/travelling/" >travelling</a>, 
                <a href="/seeing/" >seeing</a>, 
                <a href="/creating/" >creating</a>, 
                <a href="/coding/" >coding</a>, 
                <a href="/reading/" >reading</a> and 
                <a href="/walking/" >walking</a> the 
                <a href="/archive/tagged/angie/"  >dog</a>üêï‚Äçü¶∫. Read 
                    his 413 <a href="/archiving/" >posts</a> and find out more
                <a href="/about/" >about</a> him.

            </nav>
            </div>
        </div>
    </header>
    <main id="site-content"  class="tmpl-post">
        <hr class="nodisplay" aria-hidden="true">
        <div class="main-content">
            
<article>
  <nav aria-label="Paging">
      <div class="prev-next">
        <strong>¬´ Newer:</strong><a class="next" rel="next" href="/posts/2023/bridel-circular-walk/">Bridel Circular Walk</a>

        <br>
        <strong>¬ª Older:</strong><a class="prev" rel="prev" href="/posts/2023/rcs/">Restaurant Computer Systems</a>
      </div>
      <hr>
  </nav>
  <header id="skip-content-target">
      <h1>Improving the pipeline</h1> 
      <h2 class="published">
          <time class="dt-published" datetime="Invalid DateTime">
              <span class="date-day">24</span> 
              <span class="date-month">May</span>, 
              <span class="date-year">2023</span>
          </time>
      </h2>
  </header>
  <p>Since moving this site to <a href="https://www.11ty.dev/">Eleventy</a> back in <a href="/posts/2021/welcome-back/">December 2020</a> I've been continually improving my publication pipeline. It started out being a manual process running bits of hacked together code on my laptop before switching to my online tool of the day for pushing the changes to the hosted site.</p>
<p>For a long time I was using <a href="https://tina.io/forestry/">Forestry.io</a> which is now discontinued and I never really took to it's replacement. So I settled on simply using Github for everything. This means the source for code is pushed from my laptop to  Github, the published site is on Github Pages and the processing for creating the site from the source is managed through Github Actions. Initiallly triggering these three parts were things I did manually and separately.</p>
<p>I soon started scripting these actions in Powershell. The first script simply pushed the changes to github. I modified this to include a pull from github before the push, to ensure there were no conflicts when pushing. After running the script, I would manually switch to GitHub to run the workkflow in GitHub Actions that actually updated the site with the changes.</p>
<p>Well, yesterday I finally added that task to the script as well. Using the GitHub Rest API is straighforward and creating the correct curl command was relatively easy. But I don't know much about curl and in any case the script is a powershell script. Some Googling (mainly using Bing üôÇ) got me most of the way there, by using the <code>Invoke-RestMethod</code>. But I wasn't sure how to add one property to the command. Thankfully I found <a href="https://stackoverflow.com/a/73773558/131948">a code snippet on Stackoverflow</a> which gave me what I needed. It had no explanations or comments, it was just posted as an answer to a question as is. Nevertheless it solved my problem.</p>
<p>And so this post becomes the first one pushed to GitHub and published on GitHub Pages using one integrated script. üëè</p>
 
  <hr aria-hidden="true">
  <div class="tagged"><strong>Tagged:</strong><a href="/archive/tagged/web/" class="post-tag">web</a> &nbsp;<a href="/archive/tagged/development/" class="post-tag">development</a> &nbsp;<a href="/archive/tagged/github/" class="post-tag">github</a> &nbsp;<a href="/archive/tagged/publication/" class="post-tag">publication</a> &nbsp;<a href="/archive/tagged/actions/" class="post-tag">actions</a> &nbsp;<a href="/archive/tagged/workflows/" class="post-tag">workflows</a> &nbsp;
  </div>
  <hr aria-hidden="true">
  <nav aria-label="Paging">
      <div class="prev-next">
        <strong>¬´ Newer:</strong><a class="next" rel="next" href="/posts/2023/bridel-circular-walk/">Bridel Circular Walk</a>

        <br>
        <strong>¬ª Older:</strong><a class="prev" rel="prev" href="/posts/2023/rcs/">Restaurant Computer Systems</a>
      </div>
      <hr>
  </nav>
</article>


        </div> 
    </main>
    <footer>
        <div class="footer-area">
            <div class="copy">
                <a href="https://www.robin.is/">https://www.robin.is/</a> &copy; 1998 - 2023
                <br>
                <span class="emojis">üëç</span>  
            </div> 
            <div class="power">
                <div class="footer-nav">
                    <nav aria-label="Footer">
                        <img src="/assets/images/rss-logo.png" alt="">&nbsp;<a class="a11y-statement" href="/feed/">RSS</a>
                        
                                | <a href="/pages/accessibility/">Accessibility</a>
                    </nav>
                </div>
                <br>
                Powered with HTML, CSS and <a href="https://www.a11yproject.com/">a11y</a>.
            </div>
            <div class="lastrun">Hand crafted using <a href="https://www.11ty.dev/">eleventy</a> on the 25/07/2023 at 18:35:41 in the flashiest of flashes‚ö°</div>
        </div>
    </footer>
    <!-- Current page: /posts/2023/publication-pipeline/ -->
  </body>
</html>
