<!doctype html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8" />
    <!-- See: https://www.w3schools.com/css/css_rwd_viewport.asp-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="X-Clacks-Overhead"
      content="GNU Terry Pratchett; Parrain"
    />
    <title>Robin is formulating questions</title>

    <meta
      name="description"
      content="writing, travelling, seeing, coding and walking the üêï‚Äçü¶∫"
    />
    <meta
      name="keywords"
      content="posts,general,web,development,eleventy,javascript"
    />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />

    <link
      rel="canonical"
      href="https://www.robin.is/posts/2024/formulating-questions/"
    />
    <link rel="me" href="https://github.com/robindotis/" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Robin is RSS"
      href="/feed/"
    />
    <link
      rel="alternate"
      href="/feed/index.xml"
      type="application/atom+xml"
      title="Robin is"
    />
    <link rel="alternate" href="." type="application/json" title="Robin is" />
    <link
      rel="icon"
      href="/assets/images/cw.jpg"
      type="image/jpeg"
      sizes="50x50"
    />
    <!--
    <link rel="manifest" href="/manifest.json">
    -->
    <link
      rel="webmention"
      href="https://webmention.io/www.robin.is/webmention"
    />
    <link rel="authorization_endpoint" href="https://indieauth.com/auth" />
    <link rel="token_endpoint" href="https://tokens.indieauth.com/token" />

    <meta property="a11y:statement" content="/pages/accessibility/" />
    <meta property="a11y:feedback" content="/pages/accessibility/#feedback" />
    <meta
      property="a11y:complaints"
      content="/pages/accessibility/#complaints"
    />

    <meta property="og:locale" content="en_GB" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Robin is... Formulating Questions" />
    <meta
      property="og:description"
      content="writing, travelling, seeing, coding and walking the üêï‚Äçü¶∫"
    />
    <meta
      property="og:url"
      content="https://www.robin.is/posts/2024/formulating-questions/"
    />
    <meta property="og:site_name" content="Robin is" />
    <meta property="og:image" content="" />

    <meta name="DC.title" content="robin.is" />
    <meta name="DC.creator " content="Robin Massart" />

    <link
      rel="preload"
      href="/assets/fonts/Mona-Sans.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <link
      href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/assets/css/fonts.css" media="all" />
    <link rel="stylesheet" href="/assets/css/structure.css" media="all" />
    <link rel="stylesheet" href="/assets/css/style.css" media="all" />
    <link rel="stylesheet" href="/assets/css/default.css" media="all" />
    <script src="/assets/js/theme.js" defer></script>
  </head>
  <body>
    <p class="skip-link">
      <a href="#skip-content-target">Skip to the content</a>
    </p>
    <header class="masthead h-card">
      <div class="header-area">
        <p id="themeSwitch"></p>
        <hr class="nodisplay" aria-hidden="true" />
        <div class="header-title">
          <span class="sitetitle">
            <img
              class="logo u-logo u-photo"
              src="/assets/images/cw.jpg"
              alt=""
              width="50"
              height="50"
            />
            <a href="/" class="u-url p-name">Robin is</a>
          </span>
          <nav class="subtitle p-note" aria-label="Main">
            <a href="/now/">now</a>
            <a href="/writing/">writing</a>,
            <a href="/travelling/">travelling</a>,
            <a href="/seeing/">seeing</a>, <a href="/creating/">creating</a>,
            <a href="/coding/">coding</a>, <a href="/reading/">reading</a> and
            <a href="/walking/">walking</a> the
            <a href="/tagging/angie/">dog</a>üêï‚Äçü¶∫. Browse his 452
            <a href="/archiving/">posts</a> or read
            <a href="/about/">about</a> him.
          </nav>
        </div>
      </div>
    </header>
    <main id="site-content" class="tmpl-post">
      <hr class="nodisplay" aria-hidden="true" />
      <div class="main-content">
        <article class="h-entry">
          <nav aria-label="Paging">
            <div class="prev-next">
              <strong>¬´ Newer:</strong
              ><a class="next" rel="next" href="/posts/2024/a-week-in-tuscany/"
                >A week in Tuscany</a
              >

              <br />
              <strong>¬ª Older:</strong
              ><a class="prev" rel="prev" href="/posts/2024/waiting/"
                >Waiting</a
              >
            </div>
            <hr />
          </nav>

          <header id="skip-content-target">
            <h1 class="p-name">Formulating Questions</h1>
            <h2 class="published">
              <time datetime="2024-05-05 08:18:27" class="dt-published">
                <span class="date-day">05</span>
                <span class="date-month">May</span>,
                <span class="date-year">2024</span>
              </time>
            </h2>
          </header>
          <div class="e-content">
            <p>
              I spent a few hours over the last couple of days upgrading my
              eleventy setup to &quot;v3.0 canary&quot;, and then to tidy up my
              eleventy config file, taking inspiration from
              <a href="https://eleventy-excellent.netlify.app/"
                >eleventy-excellent</a
              >. The idea being to move all my custom filters, collections,
              plugins and shortcodes to module files.
            </p>
            <p>
              This went very well, but there were a couple of filters that
              simply didn't work. After several hours of failing to fix them, I
              relented and decided to ask a question in the eleventy GitHub
              discussions forum. It took me about 20 minutes to draft the
              question so that I thought it would be clear.
            </p>
            <p>
              After the third re-reading and final edits, and literally just as
              I was hovering over the submit button for the final click, the
              answer jumped out of my text. It was a dead simple, a stupid
              error.
            </p>
            <p>
              Jim Nielsen's
              <a
                href="https://blog.jim-nielsen.com/2024/bulletproof-problem-solving/"
                >Bulletproof Method to Solving Problems</a
              >
              came to mind. I made it right to the very end of Step 1, but not
              further!
            </p>
            <p>
              This is what I was going to submit, see if you can spot the
              problem. üôÇ
            </p>
            <blockquote>
              I have upgraded Eleventy to v3.0 canary which has generally worked
              very well. So I don't think this is related to that (and probably
              more to my general lack of knowledge...).
              <p>
                I then moved my custom filters from the eleventy.config.js file
                to a module file. At this point I got an error for one of the
                filters.
              </p>
              <p>
                The filter is creating a URL link to the file on github and
                looks like this in the eleventy.config.js file:
              </p>
              <pre
                class="language-js"
              ><code class="language-js">eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">'pathToGitHub'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">localPath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> baseURL <span class="token operator">=</span> <span class="token string">'https://github.com/..../blob/master/'</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> outURL <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>localPath<span class="token punctuation">,</span>baseURL<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> outURL<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
              <p>
                This works fine when using the filter like this in my njk file:
              </p>
              <pre
                class="language-html"
              ><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://github.com/robindotis/robin.is/blob/master/posts/2024/formulating-questions.md<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Edit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre>
              <p>
                But when I then move this filter into a module and import and
                add the filter like this:
              </p>
              <pre
                class="language-js"
              ><code class="language-js"><span class="token keyword">import</span> filters <span class="token keyword">from</span> <span class="token string">"./_config/filters.js"</span><span class="token punctuation">;</span><br><span class="token punctuation">.</span><br><span class="token punctuation">.</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"pathToGitHub"</span><span class="token punctuation">,</span> filters<span class="token punctuation">.</span>folderList<span class="token punctuation">)</span><span class="token punctuation">;</span><br></code></pre>
              <p>
                I get this error when using the filter to create the edit link
                above:
              </p>
              <pre
                class="language-js"
              ><code class="language-js"><span class="token punctuation">[</span>11ty<span class="token punctuation">]</span> <span class="token number">2.</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">/</span>_layouts<span class="token operator">/</span>base<span class="token punctuation">.</span>njk<span class="token punctuation">)</span><br><span class="token punctuation">[</span>11ty<span class="token punctuation">]</span>   Template render error<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">C</span><span class="token operator">:</span>\<span class="token operator">...</span>\eleventy\robin<span class="token punctuation">.</span>is\_includes\footer<span class="token punctuation">.</span>njk<span class="token punctuation">)</span><br><span class="token punctuation">[</span>11ty<span class="token punctuation">]</span>   Error<span class="token operator">:</span> <span class="token constant">ENOTDIR</span><span class="token operator">:</span> not a directory<span class="token punctuation">,</span> scandir <span class="token string">'C:\...\eleventy\robin.is\pages\home.njk'</span> <span class="token punctuation">(</span>via Template render error<span class="token punctuation">)</span></code></pre>
              <p>
                As such this error makes sense, since
                <code>page.inputPath</code> is not a path to a directory but a
                file. What I don't understand is why I get this error when
                putting the filter in a module, but not when leaving it directly
                in the eleventy config file.
              </p>
              <p>
                Some further trial and error indicates that it is not related to
                the filter code itself, because even if that filter does nothing
                (eg simply <code>return &quot;/&quot;</code>) I get the error. I
                also don't get the error without using the filter, ie simply
                using this (which is obviously pointless):
              </p>
              <pre
                class="language-html"
              ><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./posts/2024/formulating-questions.md<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Edit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre>
              <p>
                So the error occurs between the output of
                <code>page.inputPath</code> and before its input into
                <code>pathToGitHub</code>, but only when that function is in a
                module. So there is something in the &quot;module&quot;
                functionality that I am not understanding.
              </p>
              <p>Any suggestions welcome!</p>
            </blockquote>
          </div>
          <hr aria-hidden="true" />
          <div class="tagged">
            <strong>Tagged: </strong
            ><a href="/tagging/general/" class="post-tag" rel="tag">general</a>
            &nbsp;<a href="/tagging/web/" class="post-tag" rel="tag">web</a>
            &nbsp;<a href="/tagging/development/" class="post-tag" rel="tag"
              >development</a
            >
            &nbsp;<a href="/tagging/eleventy/" class="post-tag" rel="tag"
              >eleventy</a
            >
            &nbsp;<a href="/tagging/javascript/" class="post-tag" rel="tag"
              >javascript</a
            >
            &nbsp;
          </div>

          <hr aria-hidden="true" />
          <nav aria-label="Paging">
            <div class="prev-next">
              <strong>¬´ Newer:</strong
              ><a class="next" rel="next" href="/posts/2024/a-week-in-tuscany/"
                >A week in Tuscany</a
              >

              <br />
              <strong>¬ª Older:</strong
              ><a class="prev" rel="prev" href="/posts/2024/waiting/"
                >Waiting</a
              >
            </div>
            <hr />
          </nav>
        </article>
      </div>
    </main>
    <footer>
      <div class="footer-area">
        <div class="rss">
          <p>
            <img
              src="/assets/images/rss-logo.png"
              alt=""
              width="15"
              height="15"
            />&nbsp;<a class="a11y-statement" href="/feed/">RSS</a>

            | <a href="/pages/accessibility/">Accessibility</a>
          </p>
        </div>
        <div class="copy">
          <p>&copy; 1998 - 2024 robin.is AI free and 100% Human.</p>
        </div>
        <div class="copy">
          <p>
            Hand crafted using <a href="https://www.11ty.dev/">eleventy</a>
            <span class="emojis"
              ><a
                href="https://github.com/robindotis/robin.is/blob/master/posts/2024/formulating-questions.md"
                title="Edit"
                >üëç</a
              ></span
            >
          </p>
        </div>
        <div class="copy">
          <p>
            <a href="https://xn--sr8hvo.ws/previous">‚Üê</a>
            An <a href="https://xn--sr8hvo.ws">IndieWeb Webring</a> üï∏üíç
            <a href="https://xn--sr8hvo.ws/next">‚Üí</a>
          </p>
        </div>
        <div class="badges">
          <p>
            <a href="https://www.anybrowser.org/campaign/"
              ><img
                src="/assets/images/any-browser-button.png"
                alt="Viewable With Any Browser"
                width="80"
                height="15"
            /></a>
            <a href="https://indieweb.org/"
              ><img
                src="/assets/images/indieweb-button.png"
                alt="IndieWeb"
                width="80"
                height="15"
            /></a>
            <a href="https://indiewebify.me/"
              ><img
                src="/assets/images/indiewebified-button.png"
                alt="IndieWebified"
                width="80"
                height="15"
            /></a>
            <a href="http://microformats.org/"
              ><img
                src="/assets/images/microformats-button.png"
                alt="microformats"
                width="80"
                height="15"
            /></a>
            <a href="https://html.spec.whatwg.org/"
              ><img
                src="/assets/images/valid_html5_blue-button.png"
                alt="Valid HTML5"
                width="80"
                height="15"
            /></a>
            <a href="https://www.w3.org/Style/CSS/current-work"
              ><img
                src="/assets/images/valid_css3_blue-button.png"
                alt="Valid CSS3"
                width="80"
                height="15"
            /></a>
          </p>
        </div>
        <div class="lastrun">
          <p>
            Built on the 28/05/2024 at 00:33:05 in the flashiest of flashes‚ö°.
          </p>
        </div>
      </div>
    </footer>

    <!-- Current page: /posts/2024/formulating-questions/ -->
  </body>
</html>
